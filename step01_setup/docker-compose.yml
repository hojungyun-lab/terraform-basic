# Terraform 실습 환경 Docker Compose
# 호스트의 Docker 소켓을 마운트하여 컨테이너 내부에서 Docker Provider 사용 가능

services:
  terraform-lab:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: terraform-lab
    volumes:
      # 호스트 Docker 소켓 마운트 (Docker Provider가 호스트 Docker를 제어)
      - /var/run/docker.sock:/var/run/docker.sock
      # 프로젝트 전체를 마운트하여 모든 단계를 실습 가능
      - ../:/workspace
    working_dir: /workspace
    # 컨테이너가 종료되지 않도록 유지
    tty: true
    stdin_open: true
