# Step 00: Terraform κ°μ” λ° μ†κ°

## π“ ν•™μµ λ©ν‘
- Infrastructure as Code(IaC) κ°λ…μ„ μ΄ν•΄ν•λ‹¤
- Terraformμ΄ λ¬΄μ—‡μ΄κ³  μ™ μ‚¬μ©ν•λ”μ§€ νμ•…ν•λ‹¤
- Terraformμ μ•„ν‚¤ν…μ²μ™€ ν•µμ‹¬ κµ¬μ„± μ”μ†λ¥Ό ν•™μµν•λ‹¤
- λ‹¤λ¥Έ IaC λ„κµ¬μ™€μ μ°¨μ΄μ μ„ μ΄ν•΄ν•λ‹¤

---

## 1. Infrastructure as Code (IaC) λ€?

### μ „ν†µμ μΈ μΈν”„λΌ κ΄€λ¦¬μ λ¬Έμ μ 

```
β μλ™ κ΄€λ¦¬ λ°©μ‹
β”β”€β”€ μ„λ²„λ¥Ό GUI μ½μ†”μ—μ„ μλ™ ν΄λ¦­μΌλ΅ μƒμ„±
β”β”€β”€ μ„¤μ •μ„ λ¬Έμ„(Wiki)μ— κΈ°λ΅ β†’ μ‹¤μ μ™€ λ¶μΌμΉ
β”β”€β”€ ν™κ²½λ§λ‹¤ λ‹¤λ¥Έ μ„¤μ • β†’ "λ‚΄ PCμ—μ„  λλ”λ°..."
β””β”€β”€ μ¥μ•  λ³µκµ¬ μ‹ μ¬ν„ λ¶κ°€λ¥
```

### IaCμ ν•µμ‹¬ μ›μΉ™

| μ›μΉ™ | μ„¤λ… |
|------|------|
| **μ½”λ“λ΅ μ •μ** | μΈν”„λΌλ¥Ό μ½”λ“ νμΌλ΅ μ‘μ„±ν•μ—¬ κ΄€λ¦¬ |
| **λ²„μ „ κ΄€λ¦¬** | Git λ“±μΌλ΅ λ³€κ²½ μ΄λ ¥ μ¶”μ  |
| **μ¬ν„ κ°€λ¥** | λ™μΌν• μ½”λ“λ΅ λ™μΌν• ν™κ²½μ„ λ°λ³µ μƒμ„± |
| **μλ™ν™”** | μλ™ μ‘μ—… μ—†μ΄ λ…λ Ήμ–΄ ν•λ‚λ΅ λ°°ν¬ |
| **λ¬Έμ„ν™” μλ™** | μ½”λ“ μμ²΄κ°€ μΈν”„λΌ λ…μ„Έμ„ μ—­ν•  |

```
β… IaC λ°©μ‹
β”β”€β”€ infrastructure.tf  β† μ½”λ“λ΅ μΈν”„λΌ μ •μ
β”β”€β”€ git commit         β† λ³€κ²½ μ΄λ ¥ μ¶”μ 
β”β”€β”€ terraform apply    β† μλ™ λ°°ν¬
β””β”€β”€ terraform destroy  β† μλ™ μ •λ¦¬
```

---

## 2. Terraform μ΄λ€?

**Terraform**μ€ HashiCorpμ—μ„ κ°λ°ν• μ¤ν”μ†μ¤ Infrastructure as Code λ„κµ¬μ΄λ‹¤.

### ν•µμ‹¬ νΉμ§•

| νΉμ§• | μ„¤λ… |
|------|------|
| **μ„ μ–Έμ (Declarative)** | "λ¬΄μ—‡μ„" λ§λ“¤μ§€ μ •μ (μ–΄λ–»κ² λ§λ“λ”μ§€λ” Terraformμ΄ μ•μ•„μ„) |
| **ν”λ«νΌ λ…λ¦½μ ** | AWS, GCP, Azure, Docker λ“± 3,000+ ν”„λ΅λ°”μ΄λ” μ§€μ› |
| **μƒνƒ κ΄€λ¦¬(State)** | ν„μ¬ μΈν”„λΌ μƒνƒλ¥Ό μ¶”μ ν•μ—¬ λ³€κ²½μ‚¬ν•­λ§ μ μ© |
| **μ‹¤ν–‰ κ³„ν(Plan)** | μ μ© μ „ λ³€κ²½ λ‚΄μ©μ„ λ―Έλ¦¬ ν™•μΈ |
| **λ¨λ“ν™”(Modules)** | μ¬μ‚¬μ© κ°€λ¥ν• μΈν”„λΌ μ»΄ν¬λ„νΈ |

### μ„ μ–Έμ  vs μ μ°¨μ 

```hcl
# μ„ μ–Έμ  (Terraform) - "μ›ν•λ” μƒνƒ"λ¥Ό μ •μ
resource "docker_container" "web" {
  name  = "my-web-server"
  image = "nginx:latest"
  ports {
    internal = 80
    external = 8080
  }
}
# β†’ Terraformμ΄ ν„μ¬ μƒνƒμ™€ λΉ„κµν•μ—¬ ν•„μ”ν• μ‘μ—…λ§ μλ™ μν–‰
```

```bash
# μ μ°¨μ  (Shell Script) - "μν–‰ν•  λ‹¨κ³„"λ¥Ό λ‚μ—΄
docker pull nginx:latest
docker run -d --name my-web-server -p 8080:80 nginx:latest
# β†’ μ΄λ―Έ μ΅΄μ¬ν•λ©΄? μ—λ¬! λ§¤λ² μ΅°κ±΄ λ¶„κΈ° ν•„μ”
```

---

## 3. Terraform μ•„ν‚¤ν…μ²

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                  Terraform CLI                   β”‚
β”‚                (terraform λ…λ Ήμ–΄)                  β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                       β”‚
          β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
          β–Ό            β–Ό            β–Ό
   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
   β”‚  HCL νμΌ   β”‚ β”‚  State  β”‚ β”‚Providers β”‚
   β”‚ (.tf νμΌ)  β”‚ β”‚ (μƒνƒ)   β”‚ β”‚ (ν”λ¬κ·ΈμΈ)β”‚
   β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
         β”‚              β”‚            β”‚
         β”‚              β”‚            β–Ό
         β”‚              β”‚    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
         β”‚              β”‚    β”‚  Target API  β”‚
         β”‚              β”‚    β”‚ (Docker, AWS  β”‚
         β”‚              β”‚    β”‚  GCP, Azure)  β”‚
         β”‚              β”‚    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
         β”‚              β”‚
         β–Ό              β–Ό
   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
   β”‚    Execution Plan       β”‚
   β”‚  (Create/Update/Delete) β”‚
   β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### ν•µμ‹¬ κµ¬μ„± μ”μ†

#### 1) Terraform Core
- HCL νμΌμ„ νμ‹±ν•κ³  μ‹¤ν–‰ κ³„νμ„ μƒμ„±
- λ¦¬μ†μ¤ κ°„ μμ΅΄μ„± κ·Έλν”„λ¥Ό κµ¬μ„±
- Stateμ™€ μ‹¤μ  μΈν”„λΌλ¥Ό λΉ„κµν•μ—¬ λ³€κ²½ μ‚¬ν•­ κ²°μ •

#### 2) Providers (ν”„λ΅λ°”μ΄λ”)
- νΉμ • ν”λ«νΌ/μ„λΉ„μ¤μ™€ ν†µμ‹ ν•λ” ν”λ¬κ·ΈμΈ
- κ° ν”„λ΅λ°”μ΄λ”λ” ν•΄λ‹Ή ν”λ«νΌμ APIλ¥Ό μ¶”μƒν™”

```hcl
# ν”„λ΅λ°”μ΄λ” μ„ μ–Έ μμ‹
terraform {
  required_providers {
    docker = {
      source  = "kreuzwerker/docker"
      version = "~> 3.0"
    }
  }
}
```

#### 3) State (μƒνƒ νμΌ)
- `terraform.tfstate` νμΌμ— ν„μ¬ μΈν”„λΌ μƒνƒ μ €μ¥
- μ½”λ“(μ›ν•λ” μƒνƒ)μ™€ μ‹¤μ (ν„μ¬ μƒνƒ)λ¥Ό λΉ„κµν•λ” κΈ°μ¤€μ 
- ν€ ν‘μ—… μ‹ Remote State (S3, GCS λ“±)μ— μ €μ¥

#### 4) HCL (HashiCorp Configuration Language)
- Terraformμ μ „μ© μ„¤μ • μ–Έμ–΄
- JSON νΈν™μ΄μ§€λ§ λ” μ½κΈ° μ‰¬μ΄ λ¬Έλ²•
- λ³€μ, ν•¨μ, μ΅°κ±΄λ¬Έ, λ°λ³µλ¬Έ μ§€μ›

---

## 4. Terraform μ›ν¬ν”λ΅μ°

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  Write   β”‚β”€β”€β”€β–¶β”‚   Init   β”‚β”€β”€β”€β–¶β”‚   Plan   β”‚β”€β”€β”€β–¶β”‚  Apply   β”‚
β”‚ .tf νμΌ  β”‚    β”‚ μ΄κΈ°ν™”    β”‚    β”‚ λ―Έλ¦¬λ³΄κΈ°  β”‚    β”‚ μ‹¤μ  μ μ© β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                                     β”‚
                                                     β–Ό
                                               β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                               β”‚ Destroy  β”‚
                                               β”‚ λ¦¬μ†μ¤ μ‚­μ β”‚
                                               β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

| λ‹¨κ³„ | λ…λ Ήμ–΄ | μ„¤λ… |
|------|--------|------|
| **Write** | - | `.tf` νμΌμ— μ›ν•λ” μΈν”„λΌλ¥Ό μ½”λ“λ΅ μ‘μ„± |
| **Init** | `terraform init` | ν”„λ΅λ°”μ΄λ” λ‹¤μ΄λ΅λ“ λ° μ΄κΈ°ν™” |
| **Plan** | `terraform plan` | λ³€κ²½ μ‚¬ν•­μ„ λ―Έλ¦¬ ν™•μΈ (Dry Run) |
| **Apply** | `terraform apply` | μ‹¤μ  μΈν”„λΌμ— λ³€κ²½ μ μ© |
| **Destroy** | `terraform destroy` | μƒμ„±ν• λ¦¬μ†μ¤ λ¨λ‘ μ‚­μ  |

---

## 5. Terraform vs λ‹¤λ¥Έ IaC λ„κµ¬

| κΈ°λ¥ | Terraform | Ansible | CloudFormation | Pulumi |
|------|-----------|---------|----------------|--------|
| **μ ‘κ·Ό λ°©μ‹** | μ„ μ–Έμ  | μ μ°¨μ /μ„ μ–Έμ  | μ„ μ–Έμ  | μ„ μ–Έμ  |
| **μ–Έμ–΄** | HCL | YAML | JSON/YAML | Python/TS/Go |
| **μƒνƒ κ΄€λ¦¬** | β… State νμΌ | β μ—†μ | β… Stack | β… State |
| **λ©€ν‹° ν΄λΌμ°λ“** | β… κ°•λ ¥ | β… κ°€λ¥ | β AWS μ „μ© | β… κ°€λ¥ |
| **μ£Όμ” μ©λ„** | μΈν”„λΌ ν”„λ΅λΉ„μ €λ‹ | μ„¤μ • κ΄€λ¦¬ | AWS μΈν”„λΌ | μΈν”„λΌ ν”„λ΅λΉ„μ €λ‹ |
| **μ—μ΄μ „νΈ** | λ¶ν•„μ” | λ¶ν•„μ”(SSH) | λ¶ν•„μ” | λ¶ν•„μ” |
| **ν•™μµ κ³΅μ„ ** | μ¤‘κ°„ | λ‚®μ | λ†’μ | λ†’μ |

### μ–Έμ  Terraformμ„ μ„ νƒν•λ‚?

- β… **λ©€ν‹° ν΄λΌμ°λ“** ν™κ²½μ„ κ΄€λ¦¬ν•  λ•
- β… **μΈν”„λΌ ν”„λ΅λΉ„μ €λ‹** (μ„λ²„, λ„¤νΈμ›ν¬, DB μƒμ„±)μ΄ μ£Όλ©μ μΌ λ•
- β… **λ³€κ²½ μ‚¬ν•­μ„ λ―Έλ¦¬ ν™•μΈ**(Plan)ν•κ³  μ‹¶μ„ λ•
- β… **ν€ ν‘μ—…**μΌλ΅ μΈν”„λΌλ¥Ό κ΄€λ¦¬ν•  λ•
- β… **μ¬ν„ κ°€λ¥ν• ν™κ²½**μ„ λ§λ“¤κ³  μ‹¶μ„ λ•

---

## 6. μ΄ ν•™μµ κ°€μ΄λ“μ—μ„ μ‚¬μ©ν•λ” ν™κ²½

μ΄ κ°€μ΄λ“μ—μ„λ” **Docker Provider**λ¥Ό μ‚¬μ©ν•μ—¬ μ‹¤μµν•λ‹¤.

### μ™ DockerμΈκ°€?

| μ΄μ  | μ„¤λ… |
|------|------|
| **λ¬΄λ£** | ν΄λΌμ°λ“ κ³„μ •/λΉ„μ© λ¶ν•„μ” |
| **λ΅μ»¬ μ‹¤ν–‰** | μΈν„°λ„· μ—°κ²° μ—†μ΄λ„ μ‹¤μµ κ°€λ¥ |
| **λΉ λ¥Έ ν”Όλ“λ°±** | μ»¨ν…μ΄λ„ μƒμ„±μ΄ λ‡ μ΄λ©΄ μ™„λ£ |
| **μ•μ „** | μ‹¤μν•΄λ„ λ΅μ»¬ Dockerλ§ μν–¥ |
| **μ΄μ‹ κ°€λ¥** | ν•™μµν• κ°λ…μ„ AWS/GCPμ— κ·Έλ€λ΅ μ μ© |

```hcl
# μ΄ κ°€μ΄λ“μ λ¨λ“  μ‹¤μµμ€ Docker λ¦¬μ†μ¤λ¥Ό λ‹¤λ£¬λ‹¤
resource "docker_image" "nginx" {
  name = "nginx:latest"
}

resource "docker_container" "web" {
  name  = "learning-terraform"
  image = docker_image.nginx.image_id
}
```

---

## π“ ν•µμ‹¬ μ •λ¦¬

1. **IaC**λ” μΈν”„λΌλ¥Ό μ½”λ“λ΅ κ΄€λ¦¬ν•λ” λ°©λ²•λ΅ μ΄λ‹¤
2. **Terraform**μ€ μ„ μ–Έμ  IaC λ„κµ¬λ΅, μ›ν•λ” μƒνƒλ¥Ό μ •μν•λ©΄ μλ™μΌλ΅ κ΄€λ¦¬ν•λ‹¤
3. **HCL** μ–Έμ–΄λ΅ `.tf` νμΌμ„ μ‘μ„±ν•λ‹¤
4. **State**λ΅ ν„μ¬ μƒνƒλ¥Ό μ¶”μ ν•κ³ , **Plan**μΌλ΅ λ³€κ²½ μ‚¬ν•­μ„ λ―Έλ¦¬ ν™•μΈν•λ‹¤
5. **Provider**λ¥Ό ν†µν•΄ λ‹¤μ–‘ν• ν”λ«νΌ(Docker, AWS, GCP λ“±)κ³Ό μ—°λ™ν•λ‹¤
6. μ΄ κ°€μ΄λ“μ—μ„λ” **Docker Provider**λ¥Ό μ‚¬μ©ν•μ—¬ λ¬΄λ£λ΅ μ‹¤μµν•λ‹¤

---

## β΅οΈ λ‹¤μ λ‹¨κ³„

[Step 01: ν™κ²½ μ„¤μ • (Docker + Terraform)](../step01_setup/README.md)μ—μ„ μ‹¤μµ ν™κ²½μ„ κµ¬μ„±ν•λ‹¤.
