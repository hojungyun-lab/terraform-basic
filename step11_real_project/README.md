# Step 11: ì‹¤ì „ í”„ë¡œì íŠ¸ (Docker ê¸°ë°˜ ë©€í‹°í‹°ì–´)

## ğŸ“š í•™ìŠµ ëª©í‘œ
- Docker ê¸°ë°˜ ë©€í‹°í‹°ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ Terraformìœ¼ë¡œ êµ¬ì¶•í•œë‹¤
- ëª¨ë“ˆí™”ëœ ì•„í‚¤í…ì²˜ë¥¼ êµ¬í˜„í•œë‹¤
- ë„¤íŠ¸ì›Œí¬, í”„ë¡ íŠ¸ì—”ë“œ, ë°±ì—”ë“œë¥¼ ë¶„ë¦¬í•œë‹¤
- ì§€ê¸ˆê¹Œì§€ ë°°ìš´ ëª¨ë“  ê°œë…ì„ ì¢…í•© ì ìš©í•œë‹¤

---

## 1. í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜

### êµ¬ì„± ìš”ì†Œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Docker Network                  â”‚
â”‚              (app-network)                     â”‚
â”‚                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Nginx   â”‚  â”‚  App     â”‚  â”‚  Redis   â”‚     â”‚
â”‚  â”‚(Frontend)â”‚â”€â”€â”‚(Backend) â”‚â”€â”€â”‚ (Cache)  â”‚     â”‚
â”‚  â”‚ :8100    â”‚  â”‚ :8101    â”‚  â”‚ :6379    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| ì»´í¬ë„ŒíŠ¸ | ì´ë¯¸ì§€ | ì—­í•  | í¬íŠ¸ |
|----------|--------|------|------|
| **Frontend** | nginx:alpine | ì›¹ ì„œë²„ / ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ | 8100 |
| **Backend** | httpd:alpine | ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ | 8101 |
| **Cache** | redis:alpine | ì¸ë©”ëª¨ë¦¬ ìºì‹œ | 6379 |

### ëª¨ë“ˆ êµ¬ì¡°

```
step11_real_project/
â”œâ”€â”€ main.tf              # ë£¨íŠ¸ ëª¨ë“ˆ (ì§„ì…ì )
â”œâ”€â”€ variables.tf         # ë³€ìˆ˜ ì •ì˜
â”œâ”€â”€ outputs.tf           # ì¶œë ¥ ì •ì˜
â””â”€â”€ modules/
    â”œâ”€â”€ network/         # ë„¤íŠ¸ì›Œí¬ ëª¨ë“ˆ
    â”‚   â”œâ”€â”€ main.tf
    â”‚   â”œâ”€â”€ variables.tf
    â”‚   â””â”€â”€ outputs.tf
    â”œâ”€â”€ frontend/        # í”„ë¡ íŠ¸ì—”ë“œ ëª¨ë“ˆ
    â”‚   â”œâ”€â”€ main.tf
    â”‚   â”œâ”€â”€ variables.tf
    â”‚   â””â”€â”€ outputs.tf
    â””â”€â”€ backend/         # ë°±ì—”ë“œ ëª¨ë“ˆ
        â”œâ”€â”€ main.tf
        â”œâ”€â”€ variables.tf
        â””â”€â”€ outputs.tf
```

---

## 2. ì‚¬ìš©ëœ Terraform ê°œë… ì¢…í•©

ì´ ì‹¤ì „ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì§€ê¸ˆê¹Œì§€ ë°°ìš´ ëª¨ë“  ê°œë…ì„ í™œìš©í•œë‹¤:

| ê°œë… | ì ìš© |
|------|------|
| **HCL ê¸°ì´ˆ** | ë¸”ë¡, íƒ€ì…, ë³´ê°„ë²• |
| **Variables** | ë³€ìˆ˜ ì •ì˜, validation, tfvars |
| **Outputs** | ëª¨ë“ˆ ê°„ ë°ì´í„° ì „ë‹¬ |
| **Data Sources** | bridge ë„¤íŠ¸ì›Œí¬ ì¡°íšŒ |
| **Modules** | network/frontend/backend ë¶„ë¦¬ |
| **Dynamic** | ë¼ë²¨ ë™ì  ìƒì„± |
| **Locals** | ê³µí†µ ì„¤ì • ê´€ë¦¬ |
| **Provisioners** | í—¬ìŠ¤ ì²´í¬ |

---

## 3. ê° ëª¨ë“ˆ ì„¤ëª…

### Network ëª¨ë“ˆ
- ê²©ë¦¬ëœ Docker ë„¤íŠ¸ì›Œí¬ ìƒì„±
- ì„œë¸Œë„·/ê²Œì´íŠ¸ì›¨ì´ ì„¤ì •
- ëª¨ë“  ì»¨í…Œì´ë„ˆê°€ ì´ ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°

### Frontend ëª¨ë“ˆ
- Nginx ì»¨í…Œì´ë„ˆ ë°°í¬
- ì™¸ë¶€ í¬íŠ¸ ë§¤í•‘ (ì‚¬ìš©ì ì ‘ê·¼ í¬ì¸íŠ¸)
- í™˜ê²½ ë³€ìˆ˜ë¡œ ë°±ì—”ë“œ ì£¼ì†Œ ì„¤ì •

### Backend ëª¨ë“ˆ
- httpd(Apache) ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„
- Redis ìºì‹œ ì„œë²„
- í”„ë¡ íŠ¸ì—”ë“œì™€ ë™ì¼ ë„¤íŠ¸ì›Œí¬ì—ì„œ í†µì‹ 

---

## ğŸ“ í•µì‹¬ ì •ë¦¬

1. **ëª¨ë“ˆí™”**: ë„¤íŠ¸ì›Œí¬/í”„ë¡ íŠ¸ì—”ë“œ/ë°±ì—”ë“œë¥¼ ë…ë¦½ ëª¨ë“ˆë¡œ ë¶„ë¦¬
2. **ë³€ìˆ˜ ì „íŒŒ**: ë£¨íŠ¸ â†’ ëª¨ë“ˆë¡œ ì„¤ì • ì „ë‹¬
3. **ì¶œë ¥ ì—°ê²°**: ëª¨ë“ˆ ê°„ ì¶œë ¥ê°’ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ ì—°ê²°
4. **ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬**: ì „ìš© Docker ë„¤íŠ¸ì›Œí¬ë¡œ ì„œë¹„ìŠ¤ ê°„ í†µì‹ 
5. **ì¢…í•© ì ìš©**: Variables, Modules, Dynamic, Locals ë“± ëª¨ë“  ê°œë… í™œìš©

---

## âœ… ì‹¤ìŠµ í™•ì¸

```bash
cd step11_real_project

terraform init
terraform validate
terraform plan
terraform apply -auto-approve

# ìƒì„±ëœ ë¦¬ì†ŒìŠ¤ í™•ì¸
docker ps | grep real-project
docker network ls | grep real-project

# ì„œë¹„ìŠ¤ ì ‘ê·¼ í…ŒìŠ¤íŠ¸
curl http://localhost:8100  # Frontend (Nginx)
curl http://localhost:8101  # Backend (httpd)

# ì¶œë ¥ í™•ì¸
terraform output

# ì •ë¦¬
terraform destroy -auto-approve
```

---

## â¡ï¸ ë‹¤ìŒ ë‹¨ê³„

[Step 12: ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ & ë‹¤ìŒ ë‹¨ê³„](../step12_best_practices/README.md)ì—ì„œ ì‹¤ë¬´ íŒê³¼ ë‹¤ìŒ í•™ìŠµ ë°©í–¥ì„ í™•ì¸í•œë‹¤.
